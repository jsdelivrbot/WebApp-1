<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WebApp - ex09.4_exitDialog</title>
</head>

<body>

<div class="page" id="firstPage">
	<h1>WebApp - <span style="color:#004;">First Page</span></h1>
	<p>If you are viewing this page (firstPage), it means that the current browser URL ends with "#firstPage"</p>
	<a href="#secondPage?returnDialog">go to the next page</a>
</div>

<div class="page" id="secondPage">
	<h1>WebApp - <span style="color:#040;">Second Page</span></h1>
	<p>If you are viewing this page (secondPage), it means that the current browser URL ends with "#secondPage"</p>
	<a href="javascript:window.history.back();">return to the previous</a>
</div>

<div class="modal" id="returnDialog">
	<div style="padding: 0.5em; text-align: center;">
		<p>Are you sure you want to return to the previous page?</p>
		<button onclick="window.history.back();">Cancel</button>&nbsp;&nbsp;
		<button onclick="window.history.go(-2);" id="returnButton">Return</button>
	</div>
</div>

<!-- script src="https://cdn.rawgit.com/samereberlin/WebApp/master/www/WebApp.js"></script -->
<script src="../WebApp.js"></script>

<script>
// Set secondPage callbacks:
var secondPageElement = document.getElementById('secondPage');
secondPageElement.onShow = function(searchData, referrerElement) {
	if (searchData && (searchData === 'returnDialog')) {
		window.location.hash = 'secondPage';
	}
};
secondPageElement.onUpdateSearch = function(searchData) {
	if (searchData && (searchData === 'returnDialog')) {
		window.location.hash = 'returnDialog';
	}
};

// Set returnDialog callbacks:
var returnDialogElement = document.getElementById('returnDialog');
var returnButtonElement = document.getElementById('returnButton');
returnDialogElement.onShow = function() {
	returnButtonElement.focus();
}
returnDialogElement.onHide = function(nextSearchData, nextElement) {
	if (nextSearchData && (nextSearchData === 'returnDialog')) {
		window.location.hash = nextElement.id;
	}
}
</script>

</body>

</html>
